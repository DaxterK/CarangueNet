<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FakeNet Carangueju</title>
  <style>
    body, html { margin:0; padding:0; font-family:'MS Sans Serif', sans-serif; background:#a0d8d0; overflow-x:hidden; height:100%; }
    #welcomeScreen { width:100%; height:100%; background:#f0f0f0; display:flex; justify-content:center; align-items:center; flex-direction:column; }
    #welcomeScreen input, #welcomeScreen button { margin:5px; padding:10px; font-size:16px; }
    #desktop { width:100%; height:100%; position:relative; display:none; overflow-y:auto; }
    #taskbar { position:absolute; bottom:0; left:0; width:100%; height:30px; background:#666; display:flex; align-items:center; padding:0 10px; z-index:1000; }
    #userInfo { display:flex; align-items:center; color:#fff; }
    #userInfo span { margin-right:10px; }
    #userInfo button { padding:5px 10px; background:#aaa; border:none; cursor:pointer; border-radius:3px; }
    #clock { color:#fff; font-family:'Courier New', monospace; font-size:12px; margin-left:auto; }
    .toast { background:#f0d888; padding:5px; margin:5px 0; border:1px solid #ccc; border-radius:3px; font-size:12px; color:#000; animation: fadeout 2s forwards; }
    #popup { display:none; position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); background:#fff; padding:20px; border:2px solid #666; border-radius:5px; z-index:2000; box-shadow:0 0 10px rgba(0,0,0,0.5); }
    #popup p { margin:0 0 15px 0; }
    #popup button { padding:5px 10px; margin-right:10px; }
    @keyframes fadeout { 0%{opacity:1;} 90%{opacity:1;} 100%{opacity:0;} }
    @media (max-width: 480px) {
      #welcomeScreen { padding:10px; }
      #welcomeScreen input, #welcomeScreen button { width:100%; box-sizing:border-box; }
      #taskbar { height:40px; font-size:14px; padding:5px; }
      #userInfo button { padding:3px 8px; font-size:12px; }
      #popup { width:80%; }
    }
  </style>
</head>
<body>

<!-- Pantalla de bienvenida -->
<div id="welcomeScreen">
  <h1>Bienvenido a FakeNet Carangueju</h1>
  <div>
    <h3>Visitante</h3>
    <button onclick="enterAsVisitor()">Entrar como visitante</button>
  </div>
  <div>
    <h3>Usuario</h3>
    <input type="text" id="userName" placeholder="Elige tu nombre">
    <button onclick="enterAsUser()">Entrar como usuario</button>
  </div>
  <div id="welcomeToast"></div>
</div>

<!-- Escritorio -->
<div id="desktop">
  <div id="taskbar"></div>
  <div id="popup">
    <p>¿Estás seguro de que quieres cerrar sesión?</p>
    <button onclick="confirmLogout(true)">Sí</button>
    <button onclick="confirmLogout(false)">No</button>
  </div>
</div>

<script>
  let currentUser = '';
  let isVisitor = false;

  function showWelcomeToast(msg) {
    const container = document.getElementById('welcomeToast');
    const toast = document.createElement('div');
    toast.className = 'toast';
    toast.textContent = msg;
    container.appendChild(toast);
    setTimeout(() => toast.remove(), 2000);
  }

  function enterAsVisitor() {
    const randomNum = Math.floor(Math.random() * 900) + 100; // Número aleatorio de 3 cifras
    currentUser = `Visitante${randomNum}`;
    isVisitor = true;
    startDesktop();
    showWelcomeToast(`Bienvenido, ${currentUser}!`);
  }

  function enterAsUser() {
    const name = document.getElementById('userName').value.trim();
    if (!name) { showWelcomeToast('Elige un nombre'); return; }
    currentUser = name;
    isVisitor = false;
    startDesktop();
    showWelcomeToast(`Bienvenido, ${currentUser}!`);
  }

  function confirmLogout(confirm) {
    const popup = document.getElementById('popup');
    popup.style.display = 'none';
    if (confirm) {
      logout();
    }
  }

  function logout() {
    currentUser = '';
    isVisitor = false;
    document.getElementById('desktop').style.display = 'none';
    document.getElementById('welcomeScreen').style.display = 'flex';
    document.getElementById('taskbar').innerHTML = '';
    showWelcomeToast('Sesión cerrada');
  }

  function startDesktop() {
    document.getElementById('welcomeScreen').style.display = 'none';
    document.getElementById('desktop').style.display = 'block';
    initTaskbar();
    startClock();
  }

  function initTaskbar() {
    const taskbar = document.getElementById('taskbar');
    taskbar.innerHTML = '';

    const userInfo = document.createElement('div');
    userInfo.id = 'userInfo';
    userInfo.innerHTML = `<span>${currentUser}</span><button onclick="showPopup()">Cerrar sesión</button>`;
    taskbar.appendChild(userInfo);

    const clock = document.createElement('div');
    clock.id = 'clock';
    taskbar.appendChild(clock);
  }

  function showPopup() {
    const popup = document.getElementById('popup');
    popup.style.display = 'block';
  }

  function startClock() {
    function updateClock() {
      const now = new Date();
      const hours = String(now.getHours()).padStart(2, '0');
      const minutes = String(now.getMinutes()).padStart(2, '0');
      const seconds = String(now.getSeconds()).padStart(2, '0');
      const date = String(now.getDate()).padStart(2, '0');
      const month = String(now.getMonth() + 1).padStart(2, '0');
      const year = now.getFullYear();
      const clock = document.getElementById('clock');
      if (clock) {
        clock.textContent = `${hours}:${minutes}:${seconds} ${date}/${month}/${year}`;
      }
    }
    updateClock();
    setInterval(updateClock, 1000);
  }
</script>

</body>
</html>
